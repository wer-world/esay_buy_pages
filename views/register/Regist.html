<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<link type="text/css" rel="stylesheet" href="../../css/style.css" />
    <!--[if IE 6]>
    <script src="../../js/iepng.js" type="text/javascript"></script>
    <script type="text/javascript">
        EvPNG.fix('div, ul, img, li, input, a');
    </script>
    <![endif]-->
    <script type="text/javascript" src="../../js/jquery-1.11.1.min_044d0927.js"></script>
	<script type="text/javascript" src="../../js/jquery.bxslider_e88acd1b.js"></script>

    <script type="text/javascript" src="../../js/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="../../js/menu.js"></script>

	<script type="text/javascript" src="../../js/select.js"></script>

	<script type="text/javascript" src="../../js/lrscroll.js"></script>

    <script type="text/javascript" src="../../js/iban.js"></script>
    <script type="text/javascript" src="../../js/fban.js"></script>
    <script type="text/javascript" src="../../js/f_ban.js"></script>
    <script type="text/javascript" src="../../js/mban.js"></script>
    <script type="text/javascript" src="../../js/bban.js"></script>
    <script type="text/javascript" src="../../js/hban.js"></script>
    <script type="text/javascript" src="../../js/tban.js"></script>

	<script type="text/javascript" src="../../js/lrscroll_1.js"></script>


<title>尤洪</title>
</head>
<body>
<!--Begin Header Begin-->
<div class="soubg">
	<div class="sou">
        <span class="fr">
        	<span class="fl">你好，请<a href="../login/Login.html">登录</a>&nbsp; <a href="Regist.html" style="color:#ff4e00;">免费注册</a>&nbsp; </span>
            <span class="fl">|&nbsp;关注我们：</span>
            <span class="s_sh"><a href="#" class="sh1">新浪</a><a href="#" class="sh2">微信</a></span>
            <span class="fr">|&nbsp;<a href="#">手机版&nbsp;<img src="../../images/s_tel.png" align="absmiddle" /></a></span>
        </span>
    </div>
</div>
<!--End Header End-->
<!--Begin Login Begin-->
<div class="log_bg" id="root">
    <div class="top">
        <div class="logo"><a href="../Index.html"><img src="../../images/logo.png" /></a></div>
    </div>
	<div class="regist">
    	<div class="log_img"><img src="../../images/l_img.png" width="611" height="425" /></div>
		<div class="reg_c">
        	<form>
            <table border="0" style="width:543px; font-size:14px; margin-top:20px;" cellspacing="0" cellpadding="0">
              <tr height="50" valign="top">
              	<td width="95">&nbsp;</td>
                <td>
                	<span class="fl" style="font-size:24px;">注册</span>
                    <span class="fr">已有商城账号，<a href="../login/Login.html" style="color:#ff4e00;">我要登录</a></span>
                </td>
              </tr>
              <tr height="50">
                <td align="right"><font color="#ff4e00">*</font>&nbsp;登录名 &nbsp;</td>
                <td><input type="text" value="" class="l_user" v-model="user.loginName" @blur="checkLoginName()"/></td>
                <td><span>{{userMsg.loginNameMsg}}</span></td>
              </tr>
              <tr height="50">
                <td align="right"><font color="#ff4e00">*</font>&nbsp;用户名 &nbsp;</td>
                <td><input type="text" value="" class="l_user" v-model="user.userName"/></td>
                <td><span>{{userMsg.userNameMsg}}</span></td>
              </tr>
              
              <tr>
                <td align="right"><font color="#ff4e00">*</font>&nbsp;密码 &nbsp;</td>
                <td><input type="password" value="" class="l_pwd" v-model="user.password"/></td>
                <td><span>{{userMsg.passwordMsg}}</span></td>
              </tr>
              <tr height="50">
                <td align="right"><font color="#ff4e00">*</font>&nbsp;确认密码 &nbsp;</td>
                <td><input type="password" value="" class="l_pwd" v-model="user.rePassword"/></td>
                <td><span>{{userMsg.rePasswordMsg}}</span></td>
              </tr>
              <tr height="50">
                  <td align="right"><font color="#ff4e00">*</font>身份证号 &nbsp;</td>
                  <td><input type="text" value="" class="l_num" v-model="user.identityCode"/></td>
                  <td><span>{{userMsg.identityCodeMsg}}</span></td>
              </tr>
              <tr height="50">
                <td align="right"><font color="#ff4e00">*</font>&nbsp;邮箱 &nbsp;</td>
                <td><input type="text" value="" class="l_email" v-model="user.email"/></td>
                <td><span>{{userMsg.emailMsg}}</span></td>
              </tr>
              <tr height="50">
                <td align="right"><font color="#ff4e00">*</font>&nbsp;手机 &nbsp;</td>
                <td><input type="text" value="" class="l_tel" v-model="user.mobile"/></td>
                <td><span>{{userMsg.mobileMsg}}</span></td>
              </tr>
              <tr height="50">
                <td align="right"> <font color="#ff4e00">*</font>&nbsp;验证码 &nbsp;</td>
                <td>
                    <input type="text" value="" class="l_ipt" />
                    <a href="#" style="font-size:12px; font-family:'宋体';">换一张</a>
                </td>
                <td><span>{{userMsg.userNameMsg}}</span></td>
              </tr>
              <tr>
              	<td>&nbsp;</td>
                <td style="font-size:12px; padding-top:20px;">
                	<span style="font-family:'宋体';" class="fl">
                    	<label class="r_rad"><input type="checkbox" /></label><label class="r_txt">我已阅读并接受《用户协议》</label>
                    </span>
                </td>
              </tr>
              <tr height="60">
              	<td>&nbsp;</td>
                <td><input type="submit" value="立即注册" class="log_btn" @click.prevent="registUser()"/></td>
              </tr>
            </table>
            </form>
        </div>
    </div>
</div>
<!--End Login End-->
<!--Begin Footer Begin-->
<div class="btmbg">
    <div class="btm">
        备案/许可证编号：蜀ICP备12009302号-1-www.dingguagua.com   Copyright © 2015-2018 尤洪商城网 All Rights Reserved. 复制必究 , Technical Support: Dgg Group <br />
        <img src="../../images/b_1.gif" width="98" height="33" /><img src="../../images/b_2.gif" width="98" height="33" /><img src="../../images/b_3.gif" width="98" height="33" /><img src="../../images/b_4.gif" width="98" height="33" /><img src="../../images/b_5.gif" width="98" height="33" /><img src="../../images/b_6.gif" width="98" height="33" />
    </div>
</div>
<!--End Footer End -->
<script src="../../js/vue.min.js"></script>
<script src="../../js/axios.js"></script>
<script type="module">

  Vue.config.productionTip = false

  new Vue({
    el:"#root",
    data:{
      user:{
        loginName:'',
        userName:'',
        password:'',
        rePassword:'',
        identityCode:'',
        email:'',
        mobile:'',
      },
      userMsg:{
        loginNameMsg:'',
        userNameMsg:'',
        passwordMsg:'',
        rePasswordMsg:'',
        identityCodeMsg:'',
        emailMsg:'',
        mobileMsg:'',
      },
    },
    methods: {
      registUser(){
        this.userMsg={
          loginNameMsg:'',
          userNameMsg:'',
          passwordMsg:'',
          rePasswordMsg:'',
          identityCodeMsg:'',
          emailMsg:'',
          mobileMsg:'',
        }
        var userNameRegix = /^[\u4e00-\u9fa5a-zA-Z0-9]{3,8}$/
        if (this.user.loginName.trim().length == 0) {
          this.userMsg.loginNameMsg="请输入登录名"
          return;
        }
        if (!userNameRegix.test(this.user.loginName)) {
          this.userMsg.loginNameMsg="请输入3-8位登录名"
          return;
        }
        this.checkLoginName();
        if (this.user.userName.trim().length == 0) {
          this.userMsg.userNameMsg="请输入用户名"
          return;
        }
        if (!userNameRegix.test(this.user.userName)) {
          this.userMsg.userNameMsg="请输入3-8位用户名"
          return;
        }
        if (this.user.password.trim().length == 0) {
          this.userMsg.passwordMsg="请输入密码"
          return;
        }
        var passwordMsgRegix = /^[A-Za-z0-9]{6,18}$/
        if (!passwordMsgRegix.test(this.user.password)) {
          this.userMsg.passwordMsg="请输入6-18位密码"
          return;
        }
        if (this.user.rePassword.trim().length == 0) {
          this.userMsg.rePasswordMsg="请输入确认密码"
          return;
        }
        if (!passwordMsgRegix.test(this.user.rePassword)) {
          this.userMsg.rePasswordMsg="请输入6-18位密码"
          return;
        }
        if (this.user.password != this.user.rePassword) {
          this.userMsg.rePasswordMsg="请与密码一致"
          return;
        }
        if (this.user.identityCode.trim().length == 0) {
          this.userMsg.identityCodeMsg="请输入身份证号"
          return;
        }
        var identityCodeRegix = /^[0-9]{18}$/
        if (!identityCodeRegix.test(this.user.identityCode)) {
          this.userMsg.identityCodeMsg="请输入正确的18身份证号"
          return;
        }
        
        if (this.user.email.trim().length == 0) {
          this.userMsg.emailMsg="请输入邮箱"
          return;
        }
        var emailRegix = /^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/
        if (!emailRegix.test(this.user.email)) {
          this.userMsg.emailMsg="请输入正确的邮箱"
          return;
        }
        if (this.user.mobile.trim().length == 0) {
          this.userMsg.mobileMsg="请输入电话号码"
          return;
        }
        var mobileRegix = /^1(3[0-9]|5[0-3,5-9]|7[1-3,5-8]|8[0-9])\d{8}$/
        if (!mobileRegix.test(this.user.mobile)) {
          this.userMsg.mobileMsg="请输入正确的11位电话号码"
          return;
        }
        axios({
          method:'post',
          url:"/nginx/user/register",
          data:{
            user:this.user
          }
        }).then((result) => {
          if (result.data.code==200) {
            alert("注册成功")
            window.location="../login/Login.html"
          }
        }).catch((err) => {

        });
      },
      checkLoginName(){
        axios({
          method:'post',
          url:"/nginx/user/checkLoginName",
          data:{
            loginName:this.user.loginName
          }
        }).then((result) => {
          if (result.data.code=='200') {
            this.userMsg.loginNameMsg="√"
          }else{
            this.userMsg.loginNameMsg=result.data.message
            return;
          }
        }).catch((err) => {

        });
      }
    },

  })
</script>
</body>


<!--[if IE 6]>
<script src="//letskillie6.googlecode.com/svn/trunk/2/zh_CN.js"></script>
<![endif]-->
</html>
